import{d as e,r as t,a,J as s,b as o,o as n,u as l,c,e as i,f as d,g as r,w as u,v as p,h,t as m,i as v,j as g,k as y,l as f,m as w,n as b,S as x,p as C,F as k,q as S,s as _,x as I,y as L,z as B,A}from"./vendor.33bf8ef0.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const V=e("login",{state:()=>({account:"",timer:30,isLogin:!1,fistLogin:!1})});function U(e,t,s){const o={method:t,url:e,headers:{"Content-Type":"application/json"},data:s};return async function(){try{const e=await a(o);return e.data}catch(e){console.log(e)}}()}const P={key:0,class:"loginCard"},D={class:"right"},T={class:"inputHolder"},O={class:"inputHolder"},j={class:"inputHolder"},E={class:"vercode"},N=["disabled"];var M=o({__name:"loginCard",setup(e){const{codeDisabled:o,countdown:g,startCountdown:y}=function(e=30){const a=t(!1),s=t(e);return{codeDisabled:a,countdown:s,startCountdown:()=>{a.value=!0,s.value=e;const t=setInterval((()=>{s.value-=1,s.value<=0&&(clearInterval(t),a.value=!1)}),1e3)}}}(30),f=V(),w=t(""),b=t(""),x=()=>{""==f.account?alert("请先填写邮箱！"):(o&&(console.log("验证码发送成功"),U("http://softwareback.moyu-home.cn/verify","POST",{account:f.account})),y())},C=async()=>{if(""==f.account||""==w.value)alert("请勿填空值！");else{let e="http://softwareback.moyu-home.cn/login",t="POST",o=await async function(e){const t=await a.get("http://softwareback.moyu-home.cn/key"),o=e;let n=new s;return n.setPublicKey(t.data.publicKey),n.encrypt(o)}(w.value);console.log("encryptPassword：",o);let n={account:f.account,password:o,vercode:b.value};console.log(n);const l=await U(e,t,n);if(console.log(l.msg),console.log(l.code),null!=l.msg&&alert(l.msg),"200"==l.code){f.isLogin=!0,f.fistLogin=!1;let e=(new Date).getTime();localStorage.setItem("account",f.account),localStorage.setItem("time",e.toString())}}};return n((()=>{let e=localStorage.getItem("time");(new Date).getTime()-parseInt(e)<6e5?f.isLogin=!0:0==f.fistLogin||(alert("登录失效！"),f.isLogin=!1),f.account=localStorage.getItem("account")})),(e,t)=>l(f).isLogin?v("",!0):(c(),i("div",P,[t[7]||(t[7]=d('<div class="left" data-v-5c88432d><div class="text1" data-v-5c88432d> WELCOME </div><div class="text2" data-v-5c88432d> 欢迎来到摸鱼通讯录 </div><div class="circleContain" data-v-5c88432d></div><div class="text3" data-v-5c88432d> Moyu 莫羽 </div></div>',1)),r("div",D,[r("div",T,[t[3]||(t[3]=r("img",{src:"/assets/user.ce5b05bd.svg",style:{height:"25px","max-width":"auto",position:"absolute",top:"40px",left:"105px"},alt:""},null,-1)),u(r("input",{type:"text",placeholder:"邮箱","onUpdate:modelValue":t[0]||(t[0]=e=>l(f).account=e)},null,512),[[p,l(f).account]])]),r("div",O,[t[4]||(t[4]=r("img",{src:"/assets/password.ef7b83e3.svg",style:{height:"25px","max-width":"auto",position:"absolute",top:"40px",left:"105px"},alt:""},null,-1)),u(r("input",{type:"password",placeholder:"密码","onUpdate:modelValue":t[1]||(t[1]=e=>w.value=e)},null,512),[[p,w.value]])]),r("div",j,[t[5]||(t[5]=r("img",{src:"/assets/verify.e1c5b269.svg",style:{height:"27px","max-width":"auto",position:"absolute",top:"41px",left:"105px"},alt:""},null,-1)),r("div",E,[u(r("input",{type:"text",name:"vercode","onUpdate:modelValue":t[2]||(t[2]=e=>b.value=e),class:"inputVercode",id:"vercode",maxlength:"6",placeholder:"验证码"},null,512),[[p,b.value]]),r("button",{class:"vercodeButton",disabled:l(o),onClick:h(x,["stop"])},m(l(o)?`重新发送 ${l(g)}`:"获取验证码"),9,N)])]),r("button",{class:"loginButton",onClick:C},"登录 / 注册"),t[6]||(t[6]=r("div",{class:"footer"},[r("div",{class:"XD"}," DESIGNED BY 张开羽 832201111 "),r("img",{src:"/assets/book.38191f38.png",alt:""})],-1))])]))}});M.__scopeId="data-v-5c88432d";var H=o({__name:"login",setup:e=>(e,t)=>(c(),g(M))});const K=e("AddressBook",{state:()=>({isShow:!0,name:"",phone:"",address:"",search:"",isShowChang:!1})});async function q(e,t){const s={method:"POST",url:`http://softwareback.moyu-home.cn/${e}`,headers:{"Content-Type":"application/json"},data:t};return async function(){try{const e=await a(s);return e.data}catch(e){console.log(e)}}()}const F={class:"main"},$={class:"inputBox"},z={class:"confirm"};var G=o({__name:"inputBox",setup(e){const t=V(),a=K(),s=async()=>{if(""!=a.name&&""!=a.phone&&""!=a.address){const e={account:t.account,name:a.name,phone:a.phone,address:a.address},s=await q("addAddressBook",e);return a.isShow=!0,s}alert("请勿留空！")},o=()=>{a.isShow=!0};return(e,t)=>(c(),i("div",F,[r("div",$,[t[3]||(t[3]=r("div",{class:"text"},"添加联系人",-1)),u(r("input",{type:"text",placeholder:"姓名",maxlength:"6","onUpdate:modelValue":t[0]||(t[0]=e=>l(a).name=e)},null,512),[[p,l(a).name]]),u(r("input",{type:"number",placeholder:"电话号码",maxlength:"11","onUpdate:modelValue":t[1]||(t[1]=e=>l(a).phone=e)},null,512),[[p,l(a).phone]]),u(r("input",{type:"text",placeholder:"地址",maxlength:"13","onUpdate:modelValue":t[2]||(t[2]=e=>l(a).address=e)},null,512),[[p,l(a).address]]),r("div",z,[r("button",{onClick:h(o,["stop"])},"取消"),r("button",{onClick:h(s,["stop"]),style:{"background-color":"rgba(255, 192, 0, 1)"}},"确定")])])]))}});G.__scopeId="data-v-47509ca2";const J={class:"main"},W={class:"inputBox"},X={class:"confirm"};var Y=o({__name:"changeBox",setup(e){const t=V(),a=K(),s=async()=>{const e={account:t.account,name:a.name,phone:a.phone,address:a.address},s=await q("changeAddressBook",e);return a.isShowChang=!1,a.isShow=!0,s},o=()=>{a.isShowChang=!1,a.isShow=!0};return(e,t)=>(c(),i("div",J,[r("div",W,[t[2]||(t[2]=r("div",{class:"text"},"修改联系人",-1)),u(r("input",{type:"number",placeholder:"电话号码",maxlength:"11","onUpdate:modelValue":t[0]||(t[0]=e=>l(a).phone=e)},null,512),[[p,l(a).phone]]),u(r("input",{type:"text",placeholder:"地址",maxlength:"13","onUpdate:modelValue":t[1]||(t[1]=e=>l(a).address=e)},null,512),[[p,l(a).address]]),r("div",X,[r("button",{onClick:h(o,["stop"])},"取消"),r("button",{onClick:h(s,["stop"]),style:{"background-color":"rgba(255, 192, 0, 1)"}},"确定")])])]))}});Y.__scopeId="data-v-7cd674e3";const Q={class:"showInput"},R={class:"showChange"},Z={class:"main"},ee={class:"addressBook"},te={class:"search"},ae={class:"content"},se={class:"idCard",key:"index"},oe={class:"action"},ne=["onClick"],le=["onClick"],ce={class:"nameContent"},ie={class:"circleContain"},de=["src"],re={class:"name"},ue={class:"detailContent"},pe={class:"phone"},he={class:"address"};var me=o({__name:"addressBook",setup(e){const t=V(),a=K(),s=y((()=>Math.ceil(o.length/5)+1));let o=f([]);const d=()=>{a.isShow=!1},v=y((()=>o.filter((e=>e.name.toLowerCase().includes(a.search.toLowerCase())))));return n((()=>{let e={account:t.account};setInterval((async()=>{const t=await U("http://softwareback.moyu-home.cn/getAddressBook","post",e);Object.assign(o,t),console.log(o)}),1e3)})),(e,o)=>(c(),i(k,null,[u(r("div",Q,[b(G)],512),[[w,!l(a).isShow&&!l(a).isShowChang]]),u(r("div",R,[b(Y)],512),[[w,!l(a).isShow&&l(a).isShowChang]]),u(r("div",Z,[r("div",ee,[r("div",te,[u(r("input",{type:"text",placeholder:"通过名字搜索",maxlength:"6","onUpdate:modelValue":o[0]||(o[0]=e=>l(a).search=e)},null,512),[[p,l(a).search]]),o[1]||(o[1]=r("button",{class:"searchFor"},[r("img",{src:"/assets/search.c8b2a445.svg",alt:""})],-1))])]),o[5]||(o[5]=r("div",{class:"tip"},"左右滑动以查看更多",-1)),b(l(x),null,{default:C((()=>[(c(!0),i(k,null,S(s.value,(e=>(c(),g(l(_),{key:e},{default:C((()=>[r("div",ae,[(c(!0),i(k,null,S(v.value.slice(5*(e-1),5*e),((e,s)=>(c(),i("div",se,[r("div",oe,[r("div",{class:"change",onClick:h((t=>(async e=>{a.name=e,a.isShow=!1,a.isShowChang=!0})(e.name)),["stop"])},o[2]||(o[2]=[r("img",{src:"/assets/change.1db7168a.svg",alt:""},null,-1)]),8,ne),r("div",{class:"delete",onClick:h((a=>(async e=>{const a={account:t.account,name:e};console.log(a);const s=await q("deleteAddressBook",a);return window.location.reload(),s})(e.name)),["stop"])},o[3]||(o[3]=[r("img",{src:"/assets/delete.68863bd3.svg",alt:""},null,-1)]),8,le)]),r("div",ce,[r("div",ie,[r("img",{src:e.avator},null,8,de)]),r("div",re,m(e.name),1)]),r("div",ue,[r("div",pe,"电话："+m(e.phoneNumber),1),r("div",he,"地址："+m(e.address),1)])])))),128)),r("div",{class:"idCardAdd",onClick:h(d,["stop"])},o[4]||(o[4]=[r("img",{src:"/assets/add.b9e10bd1.svg",alt:""},null,-1)]))])])),_:2},1024)))),128))])),_:1})],512),[[w,l(a).isShow&&l(t).isLogin]])],64))}});me.__scopeId="data-v-194be58a";const ve={class:"main"};var ge=o({__name:"App",setup:e=>(e,t)=>(c(),i("div",ve,[b(H),b(me),t[0]||(t[0]=r("div",{class:"copyright"}," Copyright © 2024 莫羽 All rights reserved | 闽ICP备2023013938号 | 闽ICP备2023013938号 ",-1))]))});ge.__scopeId="data-v-5fc1aa50";const ye=I({history:L(),routes:[{name:"摸鱼通讯录登录",path:"/login",component:H},{name:"摸鱼通讯录",path:"/addressBook",component:me}]});const fe=B(ge),we=A();fe.use(we),fe.use(ye),fe.mount("#app");
