import{d as e,r as t,a,J as o,b as n,o as s,u as l,c as i,e as d,f as c,g as r,w as u,v as p,h as m,t as v,i as h,j as g,k as y,l as _,m as f,n as w,S as C,p as x,F as k,q as b,s as S,x as B,y as I,z as A,A as L,B as V}from"./vendor.e3901a6a.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const U=e("login",{state:()=>({account:"",timer:30,isLogin:!1,fistLogin:!1})});function E(e,t,o){const n={method:t,url:e,headers:{"Content-Type":"application/json"},data:o};return async function(){try{const e=await a(n);return e.data}catch(e){console.log(e)}}()}const D={key:0,class:"loginCard"},$={class:"right"},P={class:"inputHolder"},T={class:"inputHolder"},O={class:"inputHolder"},N={class:"vercode"},j=["disabled"];var K=n({__name:"loginCard",setup(e){const{codeDisabled:n,countdown:g,startCountdown:y}=function(e=30){const a=t(!1),o=t(e);return{codeDisabled:a,countdown:o,startCountdown:()=>{a.value=!0,o.value=e;const t=setInterval((()=>{o.value-=1,o.value<=0&&(clearInterval(t),a.value=!1)}),1e3)}}}(30),_=U(),f=t(""),w=t(""),C=()=>{""==_.account?alert("请先填写邮箱！"):(n&&(console.log("验证码发送成功"),E("http://extreme.moyu-home.cn/verify","POST",{account:_.account})),y())},x=async()=>{if(""==_.account||""==f.value)alert("请勿填空值！");else{let e="http://extreme.moyu-home.cn/login",t="POST",n=await async function(e){const t=await a.get("http://extreme.moyu-home.cn/key"),n=e;let s=new o;return s.setPublicKey(t.data.publicKey),s.encrypt(n)}(f.value);console.log("encryptPassword：",n);let s={account:_.account,password:n,vercode:w.value};console.log(s);const l=await E(e,t,s);if(console.log(l.msg),console.log(l.code),null!=l.msg&&alert(l.msg),"200"==l.code){_.isLogin=!0,_.fistLogin=!1;let e=(new Date).getTime();localStorage.setItem("account",_.account),localStorage.setItem("time",e.toString())}}};return s((()=>{let e=localStorage.getItem("time");(new Date).getTime()-parseInt(e)<6e5?_.isLogin=!0:0==_.fistLogin||(alert("登录失效！"),_.isLogin=!1),_.account=localStorage.getItem("account")})),(e,t)=>l(_).isLogin?h("",!0):(i(),d("div",D,[t[7]||(t[7]=c('<div class="left" data-v-e26900e2><div class="text1" data-v-e26900e2> WELCOME </div><div class="text2" data-v-e26900e2> 欢迎来到摸鱼通讯录 </div><div class="circleContain" data-v-e26900e2></div><div class="text3" data-v-e26900e2> Moyu 莫羽 </div></div>',1)),r("div",$,[r("div",P,[t[3]||(t[3]=r("img",{src:"/assets/user.ce5b05bd.svg",style:{height:"25px","max-width":"auto",position:"absolute",top:"40px",left:"105px"},alt:""},null,-1)),u(r("input",{type:"text",placeholder:"邮箱","onUpdate:modelValue":t[0]||(t[0]=e=>l(_).account=e)},null,512),[[p,l(_).account]])]),r("div",T,[t[4]||(t[4]=r("img",{src:"/assets/password.ef7b83e3.svg",style:{height:"25px","max-width":"auto",position:"absolute",top:"40px",left:"105px"},alt:""},null,-1)),u(r("input",{type:"password",placeholder:"密码","onUpdate:modelValue":t[1]||(t[1]=e=>f.value=e)},null,512),[[p,f.value]])]),r("div",O,[t[5]||(t[5]=r("img",{src:"/assets/verify.e1c5b269.svg",style:{height:"27px","max-width":"auto",position:"absolute",top:"41px",left:"105px"},alt:""},null,-1)),r("div",N,[u(r("input",{type:"text",name:"vercode","onUpdate:modelValue":t[2]||(t[2]=e=>w.value=e),class:"inputVercode",id:"vercode",maxlength:"6",placeholder:"验证码"},null,512),[[p,w.value]]),r("button",{class:"vercodeButton",disabled:l(n),onClick:m(C,["stop"])},v(l(n)?`重新发送 ${l(g)}`:"获取验证码"),9,j)])]),r("button",{class:"loginButton",onClick:x},"登录 / 注册"),t[6]||(t[6]=r("div",{class:"footer"},[r("div",{class:"XD"}," DESIGNED BY 张开羽 832201111 "),r("img",{src:"/assets/book.38191f38.png",alt:""})],-1))])]))}});K.__scopeId="data-v-e26900e2";var M=n({__name:"login",setup:e=>(e,t)=>(i(),g(K))});const F=e("AddressBook",{state:()=>({isShow:!0,name:"",phone:"",address:"",search:"",isShowChang:!1,isfavorite:"",addition_1_key:"",addition_2_key:"",addition_1_value:"",addition_2_value:"",additionCount:0,addition:{}})});async function H(e,t){const o={method:"POST",url:`http://extreme.moyu-home.cn/${e}`,headers:{"Content-Type":"application/json"},data:t};return async function(){try{const e=await a(o);return e.data}catch(e){console.log(e)}}()}const q={class:"main"},z={class:"inputBox"},J={class:"additionContent"},G={class:"additionContent"},R={class:"confirm"};var W=n({__name:"inputBox",setup(e){const t=U(),a=F(),o=async()=>{if(a.additionCount=0,""!=a.name&&""!=a.phone&&""!=a.address){if(""==a.addition_1_key){const e={account:t.account,name:a.name,phone:a.phone,address:a.address,addition:null};console.log(e);const o=await H("addAddressBook",e);return a.isShow=!0,o}if(""==a.addition_2_key){const e={account:t.account,name:a.name,phone:a.phone,address:a.address,addition:`{\n\t\t\t\t\t\t"${a.addition_1_key}":"${a.addition_1_value}"\n\t\t\t\t\t}`};console.log(e);const o=await H("addAddressBook",e);return a.isShow=!0,o}{const e={account:t.account,name:a.name,phone:a.phone,address:a.address,addition:`{\n\t\t\t\t\t\t"${a.addition_1_key}":"${a.addition_1_value}",\n\t\t\t\t\t\t"${a.addition_2_key}":"${a.addition_2_value}"\n\t\t\t\t\t}`};console.log(e);const o=await H("addAddressBook",e);return a.isShow=!0,o}}alert("请勿留空！")},n=()=>{a.isShow=!0},s=()=>{a.additionCount<2?a.additionCount++:alert("自定义内容限制为2个")};return(e,t)=>(i(),d("div",q,[r("div",z,[t[7]||(t[7]=r("div",{class:"text"},"添加联系人",-1)),u(r("input",{type:"text",placeholder:"姓名",maxlength:"6","onUpdate:modelValue":t[0]||(t[0]=e=>l(a).name=e)},null,512),[[p,l(a).name]]),u(r("input",{type:"number",placeholder:"电话号码",maxlength:"11","onUpdate:modelValue":t[1]||(t[1]=e=>l(a).phone=e)},null,512),[[p,l(a).phone]]),u(r("input",{type:"text",placeholder:"地址",maxlength:"13","onUpdate:modelValue":t[2]||(t[2]=e=>l(a).address=e)},null,512),[[p,l(a).address]]),r("div",J,[u(r("input",{class:"additionKey",type:"text",placeholder:"自定义内容",maxlength:"4","onUpdate:modelValue":t[3]||(t[3]=e=>l(a).addition_1_key=e)},null,512),[[y,l(a).additionCount>=1],[p,l(a).addition_1_key]]),u(r("input",{class:"additionValue",type:"text",placeholder:"联系方式",maxlength:"18","onUpdate:modelValue":t[4]||(t[4]=e=>l(a).addition_1_value=e)},null,512),[[y,l(a).additionCount>=1],[p,l(a).addition_1_value]])]),r("div",G,[u(r("input",{class:"additionKey",type:"text",placeholder:"自定义内容",maxlength:"4","onUpdate:modelValue":t[5]||(t[5]=e=>l(a).addition_2_key=e)},null,512),[[y,2==l(a).additionCount],[p,l(a).addition_2_key]]),u(r("input",{class:"additionValue",type:"text",placeholder:"联系方式",maxlength:"18","onUpdate:modelValue":t[6]||(t[6]=e=>l(a).addition_2_value=e)},null,512),[[y,2==l(a).additionCount],[p,l(a).addition_2_value]])]),r("button",{onClick:m(s,["stop"])},"添加"),r("div",R,[r("button",{onClick:m(n,["stop"])},"取消"),r("button",{onClick:m(o,["stop"]),style:{"background-color":"rgba(255, 192, 0, 1)"}},"确定")])])]))}});W.__scopeId="data-v-6e181522";const X={class:"main"},Y={class:"inputBox"},Q={class:"confirm"};var Z=n({__name:"changeBox",setup(e){const t=U(),a=F(),o=async()=>{const e={account:t.account,name:a.name,phone:a.phone,address:a.address},o=await H("changeAddressBook",e);return a.isShowChang=!1,a.isShow=!0,o},n=()=>{a.isShowChang=!1,a.isShow=!0};return(e,t)=>(i(),d("div",X,[r("div",Y,[t[2]||(t[2]=r("div",{class:"text"},"修改联系人",-1)),u(r("input",{type:"number",placeholder:"电话号码",maxlength:"11","onUpdate:modelValue":t[0]||(t[0]=e=>l(a).phone=e)},null,512),[[p,l(a).phone]]),u(r("input",{type:"text",placeholder:"地址",maxlength:"13","onUpdate:modelValue":t[1]||(t[1]=e=>l(a).address=e)},null,512),[[p,l(a).address]]),r("div",Q,[r("button",{onClick:m(n,["stop"])},"取消"),r("button",{onClick:m(o,["stop"]),style:{"background-color":"rgba(255, 192, 0, 1)"}},"确定")])])]))}});Z.__scopeId="data-v-7cd674e3";const ee={class:"showInput"},te={class:"showChange"},ae={class:"main"},oe={class:"addressBook"},ne={class:"search"},se={class:"uploadAndDownload"},le={class:"modal-content"},ie={class:"content"},de={class:"idCard",key:"index"},ce={class:"action"},re=["onClick"],ue=["onClick"],pe=["onClick"],me={class:"nameContent"},ve={class:"circleContain"},he=["src"],ge={class:"name"},ye={class:"detailContent"},_e={class:"phone"},fe={class:"address"},we={key:"index"},Ce={class:"address"};var xe=n({__name:"addressBook",setup(e){const o=U(),n=F(),c=t(null),I=t(!1),A=_((()=>Math.ceil(L.length/5)+1));let L=f([]);const V=()=>{n.isShow=!1},D=_((()=>L.filter((e=>e.name.toLowerCase().includes(n.search.toLowerCase())))));s((()=>{let e={account:o.account};setInterval((async()=>{const t=await E("http://extreme.moyu-home.cn/getAddressBook","post",e);Object.assign(L,t)}),1e3)}));const $=()=>{I.value=!1},P=async e=>{$();const t=e.target.files[0];if(console.log(t),!t)return void alert("没有选择文件");const n=new FormData;n.append("file",t),n.append("account",o.account);try{const e=await a.post("http://8.152.208.55:3001/import",n,{headers:{"Content-Type":"multipart/form-data"}});alert("文件上传成功"),console.log(e.data)}catch(s){alert("文件上传失败"),console.error(s)}};return(e,t)=>(i(),d(k,null,[u(r("div",ee,[w(W)],512),[[y,!l(n).isShow&&!l(n).isShowChang]]),u(r("div",te,[w(Z)],512),[[y,!l(n).isShow&&l(n).isShowChang]]),u(r("div",ae,[r("div",oe,[r("div",ne,[u(r("input",{type:"text",placeholder:"通过名字搜索",maxlength:"6","onUpdate:modelValue":t[0]||(t[0]=e=>l(n).search=e)},null,512),[[p,l(n).search]]),t[4]||(t[4]=r("button",{class:"searchFor"},[r("img",{src:"/assets/search.c8b2a445.svg",alt:""})],-1))]),r("div",se,[r("button",{class:"download",onClick:t[1]||(t[1]=m((e=>(async()=>{window.location.href=`http://8.152.208.55:3001/export​?account=${encodeURIComponent(o.account)}`})(l(o).account)),["stop"]))},"下载"),r("button",{class:"upload",onClick:t[2]||(t[2]=m((e=>I.value=!0),["stop"]))},"上传"),I.value?(i(),d("div",{key:0,class:"modal-overlay",onClick:$},[r("div",le,[t[5]||(t[5]=r("h2",null,"上传文件格式示例",-1)),t[6]||(t[6]=r("p",null,[r("img",{src:"http://static.moyu-home.cn/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20241123193054.png",alt:"",style:{"min-height":"100%",width:"500px"}})],-1)),r("button",{onClick:t[3]||(t[3]=m((e=>{c.value.click()}),["stop"]))},"我已知悉")])])):h("",!0),r("input",{type:"file",ref_key:"fileInput",ref:c,style:{display:"none"},onChange:P},null,544)])]),t[11]||(t[11]=r("div",{class:"tip"},"左右滑动以查看更多",-1)),w(l(C),null,{default:x((()=>[(i(!0),d(k,null,b(A.value,(e=>(i(),g(l(S),{key:e},{default:x((()=>[r("div",ie,[(i(!0),d(k,null,b(D.value.slice(5*(e-1),5*e),((e,a)=>(i(),d("div",de,[r("div",ce,[r("div",{class:B({favorite:0==e.favorite,favorite_active:1==e.favorite}),onClick:m((t=>(async(e,t)=>{console.log(e,t),n.name=e;let a={account:o.account,name:n.name,favorite:t};await H("favorite",a)})(e.name,e.favorite)),["stop"])},t[7]||(t[7]=[r("svg",{t:"1732301452225",class:"icon",viewBox:"0 0 1168 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1678",fill:"#939393"},[r("path",{d:"M838.903248 0.000978a328.971305 328.971305 0 0 0-255.779593 125.3457A322.023964 322.023964 0 0 0 327.539762 0.000978 334.255199 334.255199 0 0 0 0.036204 339.050822a435.334128 435.334128 0 0 0 95.892885 253.137646 2316.693821 2316.693821 0 0 0 447.271814 417.916849 72.115363 72.115363 0 0 0 85.227248 0 2398.496323 2398.496323 0 0 0 447.271813-418.014699 453.142806 453.142806 0 0 0 93.153088-253.137646A334.744448 334.744448 0 0 0 838.903248 0.000978z","p-id":"1679"})],-1)]),10,re),r("div",{class:"change",onClick:m((t=>(async e=>{n.name=e,n.isShow=!1,n.isShowChang=!0})(e.name)),["stop"])},t[8]||(t[8]=[r("img",{src:"/assets/change.1db7168a.svg",alt:""},null,-1)]),8,ue),r("div",{class:"delete",onClick:m((t=>(async e=>{const t={account:o.account,name:e};console.log(t);const a=await H("deleteAddressBook",t);return window.location.reload(),a})(e.name)),["stop"])},t[9]||(t[9]=[r("img",{src:"/assets/delete.68863bd3.svg",alt:""},null,-1)]),8,pe)]),r("div",me,[r("div",ve,[r("img",{src:e.avator},null,8,he)]),r("div",ge,v(e.name),1)]),r("div",ye,[r("div",_e,"电话："+v(e.phoneNumber),1),r("div",fe,"地址："+v(e.address),1),(i(!0),d(k,null,b(JSON.parse(e.addition),((e,t)=>(i(),d("div",we,[r("div",Ce,v(t)+"："+v(e),1)])))),128))])])))),128)),r("div",{class:"idCardAdd",onClick:m(V,["stop"])},t[10]||(t[10]=[r("img",{src:"/assets/add.b9e10bd1.svg",alt:""},null,-1)]))])])),_:2},1024)))),128))])),_:1})],512),[[y,l(n).isShow&&l(o).isLogin]])],64))}});xe.__scopeId="data-v-5a4a9592";const ke={class:"main"};var be=n({__name:"App",setup:e=>(e,t)=>(i(),d("div",ke,[w(M),w(xe),t[0]||(t[0]=r("div",{class:"copyright"}," Copyright © 2024 莫羽 All rights reserved | 闽ICP备2023013938号 | 闽ICP备2023013938号 ",-1))]))});be.__scopeId="data-v-5fc1aa50";const Se=I({history:A(),routes:[{name:"摸鱼通讯录登录",path:"/login",component:M},{name:"摸鱼通讯录",path:"/addressBook",component:xe}]});const Be=L(be),Ie=V();Be.use(Ie),Be.use(Se),Be.mount("#app");
